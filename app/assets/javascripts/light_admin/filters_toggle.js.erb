$(document).ready(function () {
  if ($("#filters_sidebar_section").length !== 0) {
    $('#active_admin_content .table_tools').append(
      $('<a>').text('<%= I18n.t 'active_admin.sidebars.filters' %>').attr({
        href: '#', id:'toggleFilters', class:'epon'
      })
    );
  };

  if (!window.location.search.includes('Filter') && $('body').hasClass('index')) {
    $('div#sidebar').hide();
    $('#main_content').css({ 'margin-right': '0px' });
    $('a#toggleFilters').removeClass('epon');
  }

  $('a#toggleFilters').click(function () {
    $('div#sidebar').toggle();
    $(this).toggleClass('epon');
    if ($('div#sidebar').is(':hidden')) {
      $('#main_content').css({ 'margin-right': '0px' });
      $('body #collection_selection').css({ 'width': 'unset' });
    } else {
      $('#main_content').css({ 'margin-right': '0px' });
      $('body #collection_selection').css({ 'width': 'calc(100% - 294px)', 'overflow': 'auto' });
    }
  })
})
